(function(e){function t(t){for(var r,n,s=t[0],u=t[1],i=t[2],l=0,m=[];l<s.length;l++)n=s[l],Object.prototype.hasOwnProperty.call(c,n)&&c[n]&&m.push(c[n][0]),c[n]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);d&&d(t);while(m.length)m.shift()();return a.push.apply(a,i||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],r=!0,n=1;n<o.length;n++){var s=o[n];0!==c[s]&&(r=!1)}r&&(a.splice(t--,1),e=u(u.s=o[0]))}return e}var r={},n={app:0},c={app:0},a=[];function s(e){return u.p+"js/"+({Room:"Room",about:"about"}[e]||e)+"."+{Room:"6ef70b38",about:"f621721f","chunk-2d21098f":"e58e987d"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,u),o.l=!0,o.exports}u.e=function(e){var t=[],o={Room:1};n[e]?t.push(n[e]):0!==n[e]&&o[e]&&t.push(n[e]=new Promise((function(t,o){for(var r="css/"+({Room:"Room",about:"about"}[e]||e)+"."+{Room:"717c19c1",about:"31d6cfe0","chunk-2d21098f":"31d6cfe0"}[e]+".css",c=u.p+r,a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var i=a[s],l=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(l===r||l===c))return t()}var m=document.getElementsByTagName("style");for(s=0;s<m.length;s++){i=m[s],l=i.getAttribute("data-href");if(l===r||l===c)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||c,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,delete n[e],d.parentNode.removeChild(d),o(a)},d.href=c;var f=document.getElementsByTagName("head")[0];f.appendChild(d)})).then((function(){n[e]=0})));var r=c[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,o){r=c[e]=[t,o]}));t.push(r[2]=a);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=s(e);var m=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(d);var o=c[e];if(0!==o){if(o){var r=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;m.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",m.name="ChunkLoadError",m.type=r,m.request=n,o[1](m)}c[e]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,o){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(u.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(o,r,function(t){return e[t]}.bind(null,r));return o},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var m=0;m<i.length;m++)t(i[m]);var d=l;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var r=o("7a23"),n={id:"nav"};function c(e,t,o,c,a,s){var u=Object(r["resolveComponent"])("Deamon"),i=Object(r["resolveComponent"])("router-view");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",n,[Object(r["createVNode"])(u),Object(r["createVNode"])(i)])}var a={class:"deamon"};function s(e,t,o,n,c,s){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",a)}var u=o("5502"),i={name:"Deamon",created:function(){console.log("Всегда должен перенаправлять"),this.$router.push({name:"Home"});var e=Object(u["d"])();console.log(e.getters),console.log("Starting connection to WebSocket Server");var t=new WebSocket("wss://vseklevo.ru:8999");e.dispatch("start_server",t)}};i.render=s;var l=i,m={name:"App",components:{Deamon:l}};m.render=c;var d=m,f=o("a18c"),p={user:{authorized:"",is_admin:!1},users:{},connection:"",rooms:[],select_room:{id:"",mode:"",orders:[],end_orders:[],info:""}},b={state:p,getters:{all_users:function(e){return e.users},start_ws:function(e){return e.connection},user:function(e){return e.user},rooms:function(e){return e.rooms},select_room:function(e){return e.select_room}},actions:{get_rooms:function(e,t){console.log("Так, сейчас я получу комнату",o);var o=e.getters.start_ws;try{o.send(JSON.stringify(t))}catch(r){console.log("ws ещё не загружен")}o.onopen=function(){console.log("Соединение есть, получаю комнаты, внимание!"),o.send(JSON.stringify(t))}},ws_message:function(e,t){var o=e.getters.start_ws;o.send(t)},start_server:function(e,t){t.onmessage=function(t){var o=JSON.parse(t.data),r=o.type;switch(r){case"get_users":e.commit("update_users",o.users);break;case"get_nickname":e.commit("put_nickname",o);break;case"cookie_user":localStorage.setItem("cookie_user",o.id);break;case"auth_user":localStorage.setItem("cookie_user",o.cookie),e.commit("put_nickname",o);break;case"get_rooms":e.commit("update_rooms",o);break;case"get_room":e.commit("get_room",o.room);break;case"create_order":e.state.select_room.id==o.room.id&&e.commit("update_orders",o.room.orders);break}},t.onopen=function(e){if(console.log("Это, как я понял, сервер запущен"),localStorage.getItem("cookie_user")){var o={type:"check_cookie",id:localStorage.getItem("cookie_user")};t.send(JSON.stringify(o))}console.log(e),console.log("Successfully connected to the echo websocket server...")},e.commit("ws_server",t)}},mutations:{get_room:function(e,t){e.select_room.id==t.id&&(e.select_room.id=t.id,e.select_room.orders=t.orders,e.select_room.end_orders=t.end_orders,e.select_room.info=t.info)},update_orders:function(e,t){e.select_room.orders=t,console.log(t)},update_users:function(e,t){e.users=t},ws_server:function(e,t){e.connection=t},put_id_room:function(e,t){e.select_room.id=t},put_mode_room:function(e,t){e.select_room.mode=t},put_nickname:function(e,t){e.user.authorized=t.authorized,e.user.is_admin=t.is_admin,console.log(e.user)},update_rooms:function(e,t){e.rooms=t.rooms}}},g=Object(u["a"])({modules:{start:b}}),_=o("1250"),v=(o("7437"),Object(r["createApp"])(d));v.use(g).use(f["a"]).use(_["a"]).mount("#app")},a18c:function(e,t,o){"use strict";o("d3b7"),o("3ca3"),o("ddb0");var r=o("6c02"),n=o("7a23"),c={class:"home"};function a(e,t,o,r,a,s){var u=Object(n["resolveComponent"])("Reg");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[Object(n["createVNode"])(u)])}var s=o("5502"),u={class:"registration"},i=Object(n["createTextVNode"])("Submit");function l(e,t,o,r,c,a){var s=Object(n["resolveComponent"])("el-input"),l=Object(n["resolveComponent"])("el-form-item"),m=Object(n["resolveComponent"])("el-button"),d=Object(n["resolveComponent"])("el-form");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",u,[Object(n["createVNode"])(d,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{label:"Логин",prop:"login"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{type:"login",autocomplete:"off",modelValue:c.login_user.login,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.login_user.login=e})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(l,{label:"Пароль",prop:"pass"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{type:"password",autocomplete:"off",modelValue:c.login_user.password,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.login_user.password=e})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(l,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{onClick:t[2]||(t[2]=function(e){return r.authorizarion(c.login_user)})},{default:Object(n["withCtx"])((function(){return[i]})),_:1})]})),_:1})]})),_:1})])}var m=o("5530"),d={name:"Reg",data:function(){return{login_user:{login:"",password:""}}},computed:Object(m["a"])({},Object(s["c"])(["user"])),setup:function(){var e=Object(s["d"])();localStorage.getItem("cookie_user")&&v.push({name:"Rooms"});var t=function(t){var o={type:"save_name",name:t};e.dispatch("ws_message",JSON.stringify(o)),v.push({name:"Rooms"})};return{authorizarion:t}},watch:{user:function(e){console.log(e)}}};d.render=l;var f=d,p={name:"Home",components:{Reg:f},computed:Object(s["c"])(["all_users","start_ws","user"]),methods:Object(s["b"])(["websocket_server"])};p.render=a;var b=p,g=[{path:"/",name:"Home",component:b},{path:"/about",name:"About",component:function(){return o.e("about").then(o.bind(null,"f820"))}},{path:"/room/:id",name:"Room",component:function(){return o.e("Room").then(o.bind(null,"3ab1"))}},{path:"/rooms",name:"Rooms",component:function(){return o.e("chunk-2d21098f").then(o.bind(null,"b924"))}}],_=Object(r["a"])({history:Object(r["b"])("/"),routes:g}),v=t["a"]=_}});
//# sourceMappingURL=app.4ff90280.js.map